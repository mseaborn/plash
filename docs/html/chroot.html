<html><head><meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968"><title>plash-chroot</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Plash: the Principle of Least Authority shell"><link rel="up" href="man-pages.html" title="Chapter&#160;6.&#160;Man pages"><link rel="prev" href="socket-connect.html" title="plash-socket-connect"><link rel="next" href="run-as-anonymous.html" title="run-as-anonymous"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">plash-chroot</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="socket-connect.html">Prev</a>&#160;</td><th width="60%" align="center">Chapter&#160;6.&#160;Man pages</th><td width="20%" align="right">&#160;<a accesskey="n" href="run-as-anonymous.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="chroot"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>plash-chroot &#8212; chroot program, for use under Plash</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">plash-chroot <em class="replaceable"><code>root-dir</code></em> <em class="replaceable"><code>command</code></em> [<span class="optional"><em class="replaceable"><code>arguments...</code></em></span>]</pre></div><div class="refsect1" lang="en"><a name="id2526295"></a><h2>Description</h2><p>Runs the command with the root directory set to <em class="replaceable"><code>root-dir</code></em>.</p><p>This program is a version of <span><strong class="command">chroot</strong></span> which works under
Plash.  Unlike the normal <span><strong class="command">chroot</strong></span>, use of
<span><strong class="command">plash-chroot</strong></span> isn't restricted to the superuser.</p><p><span><strong class="command">exec-object(1)</strong></span> may be more useful.</p></div><div class="refsect1" lang="en"><a name="id2526340"></a><h2>Discussion</h2><p>Normally, use of <span><strong class="command">chroot</strong></span> is restricted to root under Unix,
because it's dangerous in the presence of setuid executables.  (You
can hard link a setuid executable into your chroot directory and
replace the libraries it uses with your own code.)  But Plash doesn't
provide setuid executables, so it's safe.  Plash provides executable
objects as a replacement for setuid.</p><p>How it works: The program asks the server to return a reference to the
directory that it wants to chroot into.  Then it creates a new fs_op
object (which resides in the server process) for handling filesystem
requests, using that directory as the root.  It replaces its existing
fs_op object with the new one, and then it execve()s the given
command.</p></div><div class="refsect1" lang="en"><a name="id2526370"></a><h2>See also</h2><p><span><strong class="command">plash</strong></span>, <span><strong class="command">exec-object</strong></span>, <span><strong class="command">chroot</strong></span></p><p>  /usr/share/doc/plash
</p></div><div class="refsect1" lang="en"><a name="id2526396"></a><h2>Author</h2><p>Mark Seaborn &lt;mseaborn@onetel.com&gt;
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="socket-connect.html">Prev</a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">Up</a></td><td width="40%" align="right">&#160;<a accesskey="n" href="run-as-anonymous.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">plash-socket-connect&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&#160;run-as-anonymous</td></tr></table></div></body></html>
