<html><head><meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968"><title>plash</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Plash: the Principle of Least Authority shell"><link rel="up" href="man-pages.html" title="Chapter&#160;6.&#160;Man pages"><link rel="prev" href="pola-run.html" title="pola-run"><link rel="next" href="plash-opts.html" title="plash-opts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">plash</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pola-run.html">Prev</a>&#160;</td><th width="60%" align="center">Chapter&#160;6.&#160;Man pages</th><td width="20%" align="right">&#160;<a accesskey="n" href="plash-opts.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="plash"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>plash &#8212; Shell for running programs with minimum authority</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">plash [<span class="optional"><code class="option">--rcfile</code> <em class="replaceable"><code>file</code></em></span>]
      [<span class="optional"><code class="option">-c</code> <em class="replaceable"><code>command</code></em></span>]
</pre></div><div class="refsect1" lang="en"><a name="id2524636"></a><h2>Description</h2><p>Plash is the Principle of Least Authority shell.  It lets you run
Linux programs with access only to the files and directories they need
to run.  Programs are given access to files which were passed as
command line arguments.
</p></div><div class="refsect1" lang="en"><a name="id2524647"></a><h2>Options</h2><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code><code class="option">--rcfile</code> <em class="replaceable"><code>file</code></em></code></strong></span></dt><dd><p>Executes the given script on startup.  Does not switch off
    interactive mode.</p><p>    By default, the shell does not read any scripts on startup.</p></dd><dt><span class="term"><strong class="userinput"><code><code class="option">-c</code> <em class="replaceable"><code>command</code></em></code></strong></span></dt><dd><p>
    Execute the given command, and then exit.  Disables interactive mode.</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2524690"></a><h2>Argument lists</h2><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>arglist1</code></em> =&gt; <em class="replaceable"><code>arglist2</code></em></code></strong></span></dt><dd><p>
    By default, files and directories are passed as read-only.  The
    "=&gt;" operator lets you pass files and directories with read-write
    access.  Objects to the right of "=&gt;" are passed as read-write
    slots, so the object doesn't have to exist in advance.</p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>arglist1</code></em> + <em class="replaceable"><code>arglist2</code></em></code></strong></span></dt><dd><p>
    Files and directories that appear to the right of the "+" operator
    are not included in the argument list (the one used in execve()),
    but they are attached into the file namespace of the process.</p></dd><dt><span class="term"><strong class="userinput"><code>'<em class="replaceable"><code>string</code></em>'</code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>"<em class="replaceable"><code>string</code></em>"</code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>-<em class="replaceable"><code>string</code></em></code></strong></span></dt><dd><p>
    Arguments that are not filenames should be quoted, unless they
    begin with '-'.</p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>pathname</code></em>=<em class="replaceable"><code>expr</code></em></code></strong></span></dt><dd><p>
    You can attach objects to arbitrary points in the file namespace.
    Here, <em class="replaceable"><code>expr</code></em> typically evaluates to a file, directory, or
    executable object.  This will include <em class="replaceable"><code>pathname</code></em> in the argument
    list.</p></dd><dt><span class="term"><strong class="userinput"><code>{ <em class="replaceable"><code>arglist</code></em> }</code></strong></span></dt><dd><p>
    You can limit the scope of "+" or "=&gt;" using curly brackets.</p></dd><dt><span class="term"><strong class="userinput"><code>&gt;<em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>&lt;<em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>n</code></em>&gt;<em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>n</code></em>&lt;<em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>n</code></em>&gt;&amp;<em class="replaceable"><code>n</code></em></code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>n</code></em>&lt;&amp;<em class="replaceable"><code>n</code></em></code></strong></span></dt><dd><p>
    IO redirection.  You can change the file descriptors that are
    passed to the process.</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2524895"></a><h2>Example commands</h2><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code>ls .</code></strong></span></dt><dd><p>
    Arguments that were implicit before must now be made explicit.
    With the Bourne shell or Bash you can write `ls' to list the
    current directory's contents.  With Plash you must add `.' to
    grant access to the current directory.</p></dd><dt><span class="term"><strong class="userinput"><code>gcc -c foo.c =&gt; -o foo.o + .</code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>make + =&gt; .</code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>tar -cvzf  =&gt; foo.tar.gz  dir1</code></strong></span></dt><dd><p></p></dd><dt><span class="term"><strong class="userinput"><code>grep 'pattern' file | less</code></strong></span></dt><dd><p>
    Pipes work as in conventional shells.</p></dd><dt><span class="term"><strong class="userinput"><code>!!bash</code></strong></span></dt><dd><p>
    If you want to execute a command in the conventional way --
    without running the process with a virtualised filesystem, in a
    chroot jail, etc. -- you can prefix it with "!!".  This can be
    applied to individual command invocations in a pipeline.  The
    syntax for command invocations is the same whether "!!" is used or
    not, but when it is used, files listed after the "+" operator are
    ignored.</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2524972"></a><h2>Commands</h2><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code>cd <em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p>
    Sets the current directory.</p></dd><dt><span class="term"><strong class="userinput"><code>fg <em class="replaceable"><code>job-number</code></em></code></strong></span></dt><dd><p>
    Puts the given job in the foreground.  (Job numbers are not prefixed
    with `%', unlike in Bash.)</p></dd><dt><span class="term"><strong class="userinput"><code>bg <em class="replaceable"><code>job-number</code></em></code></strong></span></dt><dd><p>
    Puts the given job in the background.</p></dd><dt><span class="term"><strong class="userinput"><code>def <em class="replaceable"><code>var</code></em> = <em class="replaceable"><code>expr</code></em></code></strong></span></dt><dd><p>
    Binds the object reference returned by the expression to a variable.</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2525036"></a><h2>Expressions</h2><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code><em class="replaceable"><code>var</code></em></code></strong></span></dt><dd><p>
    Returns the object reference that is bound to the variable.</p></dd><dt><span class="term"><strong class="userinput"><code>F <em class="replaceable"><code>pathname</code></em></code></strong></span></dt><dd><p>
    Returns the file or directory object at the given path.  Will
    follow symbolic links.</p></dd><dt><span class="term"><strong class="userinput"><code>mkfs <em class="replaceable"><code>args...</code></em></code></strong></span></dt><dd><p>This expression returns a fabricated directory object containing
    the files listed in <em class="replaceable"><code>args</code></em>.  The object resides in a server
    process started by the shell.</p><p>    <em class="replaceable"><code>args</code></em> is processed in the same way as argument lists to
    commands, so read-only access will be given for files that are
    listed unless "=&gt;" is used, and objects can be attached at points
    in the directory tree using <em class="replaceable"><code>path</code></em>=<em class="replaceable"><code>expr</code></em>.</p></dd><dt><span class="term"><strong class="userinput"><code>capcmd <em class="replaceable"><code>command</code></em> <em class="replaceable"><code>args...</code></em></code></strong></span></dt><dd><p>This built-in expression is similar to a normal command
    invocation, except that it expects the resulting process to return
    an object reference as a result.  The shell passes the process a
    return continuation argument (<code class="varname">return_cont</code>; see the
    <code class="envar">PLASH_CAPS</code> environment variable), which the process
    invokes with the result.</p><p>    This expression doesn't wait for the process to exit: the process
    will typically act as a server and stay running in the background
    to handle invocations of the object that it returned.</p><p>    If the process drops the return continuation without invoking it
    (which will happen if it exits without passing the reference on),
    the expression results in an error.</p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2525150"></a><h2>See also</h2><p><span><strong class="command">exec-object</strong></span>, <span><strong class="command">plash-opts</strong></span>, <span><strong class="command">plash-socket-publish</strong></span>, <span><strong class="command">plash-socket-connect</strong></span></p><p>  /usr/share/doc/plash
</p></div><div class="refsect1" lang="en"><a name="id2525182"></a><h2>Author</h2><p>Mark Seaborn &lt;mseaborn@onetel.com&gt;
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pola-run.html">Prev</a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="man-pages.html">Up</a></td><td width="40%" align="right">&#160;<a accesskey="n" href="plash-opts.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">pola-run&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&#160;plash-opts</td></tr></table></div></body></html>
